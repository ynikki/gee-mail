<html>
	<head>
	<meta charset="UTF-8">
	<title>GeeMail Inbox</title>
		<script src="js/mail-generator.js"></script>
		<link href="css/style.css" rel="stylesheet" media="screen">
       <link rel="icon" href="/img/favicon.ico" type="image/gif"> 
    <script>
      window.onload = function(){

      	function email(messages){
      		for(var i=0; i<messages.length; i++){
            console.log(messages[i]);
            console.log(messages[i].subject);
            console.log(messages[i].body);
            console.log(messages[i].date);
            console.log(messages[i].sender);

            var emailElement = document.createElement('div');
            emailElement.className='mail';
            document.getElementById('main').appendChild(emailElement);

            var senderElement = document.createElement('div');
            senderElement.className='sender';
            senderElement.innerHTML=messages[i].sender;
            emailElement.appendChild(senderElement);

            var subjectElement = document.createElement('div');
            subjectElement.className='subject';
            subjectElement.innerHTML=messages[i].subject;
            senderElement.appendChild(subjectElement);

            var bodyElement = document.createElement('div');
            bodyElement.className='body';
            bodyElement.innerHTML=messages[i].body;
            senderElement.appendChild(bodyElement);

            var dateElement = document.createElement('div');
            dateElement.className='date';
            dateElement.innerHTML=messages[i].date;
            senderElement.appendChild(dateElement);
           
      		}
      		return messages;
      	}

 		email(geemails);


      document.getElementById('main').addEventListener('click', function(){
         toggle(document.querySelectorAll('.body'));
      });

      function toggle(elements, specifiedDisplay){
         var msg, index;

         elements = elements.length ? elements:[elements];
         for(index=0; index<elements.length; index++){
            msg=elements[index];

            if(isElementHidden(msg)){
               msg.style.display='';

               if(isElementHidden(msg)){
                  msg.style.display=specifiedDisplay || 'block';
               }
            }else{
               msg.style.display='none';
            }

            }
               function isElementHidden(msg){
               return window.getComputedStyle(msg,null).getPropertyValue('display') === 'none';
         }
      }

      toggle(geemails);


     /* function revealEmail(hidden){
         if(hidden.style.display == 'block')
            hidden.style.display = 'none';
         else
            hidden.style.display = 'block';

          var hiddenElements = document.querySelectorAll('.body');
          hiddenElements.addEventListener('click',revealEmail,useCapture);

          return hidden;
      }

      revealEmail(geemails);*/



        // ALL OF YOUR JAVASCRIPT CODE SHOULD GO HERE. 
        // We have to use window.onload so your JavaScript doesn't execute until the page has loaded and all HTML has been downloaded to your browser
        
      };
    </script>
	</head>
	<body>
		<div id="welcome">
			<p id ="welcomemsg">Welcome to GeeMail</p>
		<div class="container" id="main"></div>
      <!-- <a href="body" onclick="toggle_visibility('body');"></a> -->

		
	</body>
</html>